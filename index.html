<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie Scuffed Clicker TM</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    background: url('IMG_0770.png') no-repeat center center fixed;
    background-size: cover;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
}
#stats {
    color: #fff;
    font-size: 3vmin;
    text-align: center;
    margin-top: 1vmin;
    text-shadow: 2px 2px 5px #000;
}
#cookie-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}
#cookie {
    max-width: 25vmin;
    max-height: 25vmin;
    width: auto;
    height: auto;
    cursor: url('IMG_0775.png'), pointer;
    transition: transform 0.1s;
}
#upgrades {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2vmin;
    margin-bottom: 2vmin;
}
.upgrade {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    color: #fff;
    text-shadow: 1px 1px 3px #000;
    font-size: 2vmin;
    background: rgba(0,0,0,0.3);
    padding: 1vmin;
    border-radius: 1vmin;
    min-width: 18vmin;
}
.upgrade img {
    width: 12vmin;
    height: auto;
    margin-bottom: 0.5vmin;
}
#buttons {
    display: flex;
    gap: 2vmin;
    margin-bottom: 2vmin;
}
button {
    font-size: 2vmin;
    padding: 1vmin 2vmin;
    border: none;
    border-radius: 0.5vmin;
    cursor: pointer;
    background-color: rgba(255,255,255,0.8);
    transition: background 0.2s;
}
button:hover {
    background-color: rgba(255,255,255,1);
}
</style>
</head>
<body>
<div id="stats">
    Cookies: <span id="cookies">0</span><br>
    CPS: <span id="cps">0</span>
</div>
<div id="cookie-container">
    <img src="IMG_0771.jpeg" id="cookie">
</div>
<div id="upgrades"></div>
<div id="buttons">
    <button id="save">Save</button>
    <button id="load">Load</button>
</div>

<script>
let cookies = 0;
let cps = 0;
let upgrades = [
    {name:"Cursor", image:"IMG_0775.png", baseCost:15, baseCPS:0.1, count:0},
    {name:"Grandma", image:"IMG_0772.jpeg", baseCost:100, baseCPS:1, count:0},
    {name:"Farm", image:"IMG_0774.jpeg", baseCost:500, baseCPS:8, count:0}
];
const cookiesEl = document.getElementById('cookies');
const cpsEl = document.getElementById('cps');
const upgradesEl = document.getElementById('upgrades');
const cookieImg = document.getElementById('cookie');

function updateCPS(){
    cps = upgrades.reduce((total,u)=>total+u.count*u.baseCPS,0);
    cpsEl.textContent = cps.toFixed(1);
}

function updateUI(){
    cookiesEl.textContent = Math.floor(cookies);
    upgradesEl.innerHTML = '';
    upgrades.forEach((u,i)=>{
        const div = document.createElement('div');
        div.className = 'upgrade';
        div.innerHTML = `<img src="${u.image}"><span>${u.name}<br>Price: ${Math.floor(u.baseCost * Math.pow(1.15,u.count))} CPS: ${(u.baseCPS).toFixed(1)}</span>`;
        div.addEventListener('click', ()=>{
            let price = Math.floor(u.baseCost * Math.pow(1.15,u.count));
            if(cookies >= price){
                cookies -= price;
                u.count++;
                updateCPS();
                updateUI();
            }
        });
        upgradesEl.appendChild(div);
    });
}

cookieImg.addEventListener('click', ()=>{
    cookies++;
    cookiesEl.textContent = Math.floor(cookies);
    cookieImg.style.transform = 'scale(1.1)';
    setTimeout(()=>cookieImg.style.transform='scale(1)',100);
});

function autoClick(){
    cookies += cps/10;
    cookiesEl.textContent = Math.floor(cookies);
}
setInterval(autoClick,100);

function saveGame(){
    const saveData = {
        cookies: Math.floor(cookies),
        upgrades: upgrades.map(u=>u.count)
    };
    const randomNum = Math.floor(Math.random()*1e6);
    const blob = new Blob([JSON.stringify(saveData)],{type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `${randomNum}.AmongUsRedSus`;
    a.click();
}

function loadGame(file){
    const reader = new FileReader();
    reader.onload = e=>{
        try{
            const data = JSON.parse(e.target.result);
            cookies = data.cookies || 0;
            upgrades.forEach((u,i)=>{u.count=data.upgrades[i]||0});
            updateCPS();
            updateUI();
        }catch{
            alert('Invalid save file.');
        }
    };
    reader.readAsText(file);
}

document.getElementById('save').addEventListener('click', saveGame);
document.getElementById('load').addEventListener('click', ()=>{
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.AmongUsRedSus';
    input.onchange = e=>loadGame(e.target.files[0]);
    input.click();
});

updateUI();
</script>
</body>
</html>
