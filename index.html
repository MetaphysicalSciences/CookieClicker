<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Cookie Clicker Scuffed Ultimate</title>
<style>
:root{--ui-bg:rgba(0,0,0,0.36);--accent:#FFD54D;--glass:rgba(255,255,255,0.04)}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif;-webkit-user-select:none;user-select:none}
html,body{height:100%;overflow:hidden;background:#0f0f12 url('IMG_0770.png') center/cover no-repeat;color:#fff;display:flex;flex-direction:column}
.header{width:100%;text-align:center;padding:12px 8px;background:rgba(0,0,0,0.3);position:sticky;top:0;z-index:99}
.title{font-size:clamp(20px,3.6vmin,40px);font-weight:900;text-shadow:0 6px 22px rgba(0,0,0,0.7)}
.player-name{margin-top:6px;font-size:clamp(12px,2.2vmin,18px);cursor:pointer;text-decoration:underline;color:#fff;opacity:0.95}
.container{flex:1;display:flex;gap:2vmin;padding:1.5vmin;align-items:stretch;flex-wrap:wrap;justify-content:center;overflow:hidden}
.cookie-area{flex:1;display:flex;align-items:center;justify-content:center;position:relative;min-width:320px;min-height:320px}
.cookie-wrap{position:relative;display:flex;align-items:center;justify-content:center}
#cookie{width:clamp(180px,26vmin,420px);height:auto;cursor:url('IMG_0775.png'),pointer;z-index:30;transition:transform 0.2s ease}
.stats{position:absolute;top:12px;left:50%;transform:translateX(-50%);text-align:center;padding:8px 14px;border-radius:12px;background:linear-gradient(135deg, rgba(0,0,0,0.45), rgba(0,0,0,0.25));backdrop-filter:blur(6px);box-shadow:0 10px 40px rgba(0,0,0,0.6);z-index:50}
.stats .big{font-size:clamp(16px,3.2vmin,28px);font-weight:800}
.stats .small{font-size:clamp(11px,1.9vmin,16px);opacity:0.95;margin-top:6px}
.sidebar{width:clamp(300px,22vw,480px);flex-shrink:0;background:var(--ui-bg);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 48px);overflow:hidden}
.top-controls{display:flex;gap:8px;align-items:center;justify-content:space-between}
.mode-btn{padding:8px 12px;border-radius:8px;border:none;background:#fff;color:#111;font-weight:800;cursor:pointer;box-shadow:0 6px 20px rgba(0,0,0,0.45)}
.save-load{display:flex;gap:8px}
.save-load button{padding:8px 10px;border-radius:8px;border:none;background:rgba(255,255,255,0.92);cursor:pointer;font-weight:800}
.upgrade-scroll{overflow-y:auto;display:flex;flex-direction:column;gap:10px;max-height:calc(100% - 86px);padding-right:8px}
.upgrade{display:flex;gap:10px;align-items:center;background:var(--glass);padding:10px;border-radius:10px;min-height:88px;opacity:0.9;cursor:pointer;transition:transform 160ms ease, box-shadow 160ms ease, opacity 160ms}
.upgrade.unlocked{opacity:1}
.upgrade img{width:64px;height:auto;border-radius:10px;flex-shrink:0}
.upgrade .info{flex:1;display:flex;flex-direction:column;justify-content:center}
.upgrade .title{font-weight:800;font-size:clamp(13px,2vmin,16px)}
.upgrade .meta{font-size:12px;opacity:0.95;margin-top:6px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.upgrade .meta .price{background:rgba(0,0,0,0.35);padding:6px 8px;border-radius:8px}
.upgrade .owned{font-weight:800}
.upgrade .cps-total{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px}
.bottom-note{font-size:12px;opacity:0.85;text-align:center}
.settings-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);align-items:center;justify-content:center;z-index:9999;overflow:hidden}
.settings-content{background:linear-gradient(180deg,#111,#1a1a1a);padding:20px;border-radius:12px;min-width:320px;max-width:90vw;color:#fff;text-align:center;display:flex;flex-direction:column;gap:12px;overflow-y:auto;max-height:95vh}
.achievements{display:flex;flex-direction:column;gap:6px;overflow-y:auto;max-height:500px;padding-right:8px}
.achievement{background:rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;white-space:nowrap;display:flex;justify-content:space-between;align-items:center;position:relative}
.achievement.locked::after{content:"?";position:absolute;top:0;right:4px;font-weight:900}
.ach-btn{padding:8px 10px;background:#FFD54D;border:none;border-radius:6px;cursor:pointer;font-weight:800;margin-left:10px;min-width:74px}
.notify{position:fixed;bottom:12px;left:50%;transform:translateX(-50%);background:var(--accent);padding:10px 18px;border-radius:12px;color:#000;font-weight:800;opacity:0;transition:opacity 0.4s ease;z-index:9999}
.gold-cookie{position:absolute;width:64px;height:auto;z-index:60;pointer-events:none;animation:goldRotate 5s linear infinite}
@keyframes goldRotate{0%{transform:rotate(0deg) translateX(-100vw)}100%{transform:rotate(360deg) translateX(100vw)}}
@media (max-width:900px){.container{flex-direction:column;padding:10px;align-items:stretch}.cookie-area{min-width:unset;height:60vh}.sidebar{width:100%;max-height:36vh}.stats{top:6px}}
</style>
</head>
<body>
<div class="header">
  <div class="title">Cookie Clicker Scuffed</div>
  <div id="playerNameDisplay" class="player-name">Defult factory</div>
  <button id="openSettings" style="margin-top:6px;padding:6px 12px;border:none;border-radius:8px;background:#FFD54D;font-weight:800;cursor:pointer">Achievements</button>
</div>
<div class="container">
  <div class="cookie-area">
    <div class="cookie-wrap">
      <img id="cookie" src="IMG_0771.jpeg" alt="cookie" draggable="false">
      <audio id="clickSound" src="computer-mouse-click-352734.mp3" preload="auto"></audio>
      <audio id="music" src="18038_sck.mp3" loop preload="auto"></audio>
    </div>
    <div class="stats">
      <div class="big" id="cookiesCount">Cookies: 0</div>
      <div class="small" id="cpsCount">CPS: 0</div>
    </div>
  </div>
  <div class="sidebar">
    <div class="top-controls">
      <button id="modeToggle" class="mode-btn">Mode: Buy</button>
      <div class="save-load">
        <button id="saveBtn">Save</button>
        <button id="loadBtn">Load</button>
      </div>
    </div>
    <div class="upgrade-scroll" id="upgradeScroll"></div>
    <div class="bottom-note">Scroll to see all upgrades. Locked upgrades require cookies to unlock.</div>
  </div>
</div>

<div id="settingsModal" class="settings-modal" aria-hidden="true">
  <div class="settings-content">
    <div style="font-weight:900;font-size:clamp(16px,3vmin,24px)" id="settingsPlayerName">Player: Defult factory</div>
    <div class="achievements" id="achievementsList"></div>
    <button id="closeSettings">Close</button>
  </div>
</div>

<div class="notify" id="notifyBox"></div>

<script>
(function(){
  let _cookies=0;
  Object.defineProperty(window,'cookies',{get:()=>_cookies,set:(v)=>{if(typeof v!=='number'){_cookies=0;return} if(v!==_cookies){if(Math.abs(v-_cookies)>1000000)cheatDetected=true;_cookies=v}}); window.cookies=0;
  let cps=0,playerName='Defult factory',buyMode=true,lastClick=Date.now(),clickCount=0,antiClickTimeout=0,cheatDetected=false;
  let goldActive=false,goldEnd=0,goldCPSMultiplier=2;
  const cookieEl=document.getElementById('cookie');
  const statsCookies=document.getElementById('cookiesCount');
  const statsCPS=document.getElementById('cpsCount');
  const upgradeScroll=document.getElementById('upgradeScroll');
  const modeToggle=document.getElementById('modeToggle');
  const saveBtn=document.getElementById('saveBtn');
  const loadBtn=document.getElementById('loadBtn');
  const playerNameDisplay=document.getElementById('playerNameDisplay');
  const settingsModal=document.getElementById('settingsModal');
  const openSettings=document.getElementById('openSettings');
  const closeSettings=document.getElementById('closeSettings');
  const settingsPlayerName=document.getElementById('settingsPlayerName');
  const achievementsList=document.getElementById('achievementsList');
  const notifyBox=document.getElementById('notifyBox');
  const clickSound=document.getElementById('clickSound');
  const music=document.getElementById('music');
  const gameStart=Date.now();
  const upgrades=[
    {id:'cursor',name:'Cursor',image:'IMG_0775.png',baseCost:15,baseCPS:0.1,count:0,unlock:0},
    {id:'grandma',name:'Grandma',image:'IMG_0772.jpeg',baseCost:100,baseCPS:1,count:0,unlock:0},
    {id:'farm',name:'Farm',image:'IMG_0774.jpeg',baseCost:500,baseCPS:8,count:0,unlock:500},
    {id:'mine',name:'Mine',image:'IMG_0776.jpeg',baseCost:2000,baseCPS:47,count:0,unlock:2000},
    {id:'factory',name:'Factory',image:'IMG_0777.jpeg',baseCost:10000,baseCPS:260,count:0,unlock:10000},
    {id:'bank',name:'Bank',image:'IMG_0779.jpeg',baseCost:140000,baseCPS:1400,count:0,unlock:140000},
    {id:'temple',name:'Temple',image:'IMG_0780.jpeg',baseCost:2000000,baseCPS:7800,count:0,unlock:2000000},
    {id:'wizard',name:'Wizard Tower',image:'IMG_0781.jpeg',baseCost:33000000,baseCPS:44000,count:0,unlock:33000000},
    {id:'trollpedia',name:'TrollPedia',image:'TrollPedia.png',baseCost:560000000,baseCPS:260000,count:0,unlock:560000000},
    {id:'basement',name:'TheGuyInYourGrannysBasementV2',image:'TheGuyInYourGrannysBasementV2.png',baseCost:1000000000,baseCPS:1500000,count:0,unlock:1000000000},
    {id:'nuclear',name:'Legalize Nuclear Bombs',image:'legalize nuclear bombs.jpg',baseCost:5000000000,baseCPS:10000000,count:0,unlock:5000000000},
    {id:'sugar',name:'We Got Sugar',image:'we got surgar.jpg',baseCost:10000000000,baseCPS:25000000,count:0,unlock:10000000000},
    {id:'HoneyDiscount',name:'HoneyDiscount',image:'IMG_0785',baseCost:500000000,baseCPS:26,count:0,unlock:50000}
const achievements = [
    {name:'First Click',desc:'Click one time',cond:()=>cookies>=1,unlocked:false},
    {name:'50 Clicks',desc:'You got 50 clicks I am proud',cond:()=>cookies>=50,unlocked:false},
    {name:'Are you lazy?',desc:'Not click for 5 minutes',cond:()=>Date.now()-lastClick>=300000,unlocked:false},
    {name:'WTF are you AFK?',desc:'Wow you are afk or just really lazy for 35 minutes',cond:()=>Date.now()-lastClick>=2100000,unlocked:false},
    {name:'Weird Granny Addiction',desc:'Do you have something with grandmas AND WHY DO YOU HAVE 25000 OF THEM YOU SICKO',cond:()=>upgrades.find(u=>u.id=='grandma').count>=25000,unlocked:false},
    {name:'Anti-Cheat Cheater',desc:'Used console to cheat',cond:()=>cheatDetected,unlocked:false},
    {name:'Finger Workout',desc:'Your fingers are more ripped than your biceps',cond:()=>cookies>=500,unlocked:false},
    {name:'Cookie Monster',desc:'You are slowly becoming a blue furry freak',cond:()=>cookies>=1000,unlocked:false},
    {name:'Lazy Sloth',desc:'You sit there and do NOTHING for 10 minutes',cond:()=>Date.now()-lastClick>=600000,unlocked:false},
    {name:'Greedy Goblin',desc:'Bought so many upgrades you forgot to click',cond:()=>upgrades.reduce((a,u)=>a+u.count,0)>=100,unlocked:false},
    {name:'Grandma Hoarder',desc:'You love grannies way too much',cond:()=>upgrades.find(u=>u.id=='grandma').count>=500,unlocked:false},
    {name:'Sugar Overload',desc:'You literally have too much sugar in your blood',cond:()=>cookies>=100000,unlocked:false},
    {name:'AFK King',desc:'You achieved AFK greatness for 1 hour',cond:()=>Date.now()-lastClick>=3600000,unlocked:false},
    {name:'Troll Master',desc:'Bought TrollPedia just to annoy everyone',cond:()=>upgrades.find(u=>u.id=='trollpedia').count>=1,unlocked:false},
    {name:'Basement Dweller',desc:'Your granny’s basement is a second home',cond:()=>upgrades.find(u=>u.id=='basement').count>=1,unlocked:false},
    {name:'Nuclear Enthusiast',desc:'Legalize Nuclear Bombs because why not?',cond:()=>upgrades.find(u=>u.id=='nuclear').count>=1,unlocked:false},
    {name:'Sugar Daddy',desc:'We got sugar and you got too many cookies',cond:()=>upgrades.find(u=>u.id=='sugar').count>=1,unlocked:false},
    {name:'Cookie Overlord',desc:'You own more cookies than a bakery',cond:()=>cookies>=1000000,unlocked:false},
    {name:'Click Addict',desc:'You clicked more times than you slept',cond:()=>clickCount>=1000,unlocked:false},
    {name:'Finger Cramp',desc:'Your fingers are now permanently stuck in click position',cond:()=>clickCount>=5000,unlocked:false},
    {name:'Lazy Genius',desc:'AFK and still making more cookies than everyone else',cond:()=>cookies>=500000,unlocked:false}
];

  function calcPrice(u){return Math.floor(u.baseCost*Math.pow(1.15,u.count))}
  function computeCPS(){cps=0;for(let u of upgrades){cps+=u.baseCPS*u.count} if(goldActive) cps*=goldCPSMultiplier}
  function updateCounters(){statsCookies.textContent='Cookies: '+Math.floor(window.cookies);statsCPS.textContent='CPS: '+cps.toFixed(1)}
  function showNotify(text){notifyBox.textContent=text;notifyBox.style.opacity='1';setTimeout(()=>{notifyBox.style.opacity='0'},1800)}
  function buildUpgradesUI(){
    upgradeScroll.innerHTML='';
    for(let u of upgrades){
      const div=document.createElement('div');div.className='upgrade'; if(window.cookies>=u.unlock) div.classList.add('unlocked');
      const img=document.createElement('img'); img.src=u.image;
      const info=document.createElement('div'); info.className='info';
      const title=document.createElement('div'); title.className='title'; title.textContent=u.name;
      const meta=document.createElement('div'); meta.className='meta';
      const priceEl=document.createElement('div'); priceEl.className='price'; priceEl.textContent='Price: '+calcPrice(u);
      const ownedEl=document.createElement('div'); ownedEl.className='owned'; ownedEl.textContent='Owned: '+u.count;
      const cpsEl=document.createElement('div'); cpsEl.className='cps-total'; cpsEl.textContent='Total CPS: '+(u.baseCPS*u.count).toFixed(1);
      meta.appendChild(priceEl); meta.appendChild(ownedEl); meta.appendChild(cpsEl);
      info.appendChild(title); info.appendChild(meta);
      div.appendChild(img); div.appendChild(info);
      div.addEventListener('click',()=>{
        if(!buyMode){ if(u.count>0){ u.count--; window.cookies+=Math.floor(calcPrice(u)/2); showNotify('Sold '+u.name) } }
        else{ const price=calcPrice(u); if(window.cookies>=price){ window.cookies-=price; u.count++; showNotify('Bought '+u.name) } }
        updateAllUI();
      });
      upgradeScroll.appendChild(div);
    }
  }
  function buildAchievements(){
    achievementsList.innerHTML='';
    achievements.forEach((a,i)=>{
      if(!a.unlocked && a.cond()){ a.unlocked=true; showNotify('Achievement unlocked: '+a.name) }
      const div=document.createElement('div'); div.className='achievement'; if(!a.unlocked) div.classList.add('locked');
      const nameSpan=document.createElement('div'); nameSpan.textContent=a.name; nameSpan.style.flex='1'; nameSpan.style.fontWeight='700';
      const btn=document.createElement('button'); btn.className='ach-btn'; btn.textContent='View';
      btn.addEventListener('click',(ev)=>{ ev.stopPropagation(); if(a.unlocked){ showAchievementModal(a.name,a.desc) } else { showAchievementModal(a.name,'LOL is locked better unlock it') } });
      div.appendChild(nameSpan); div.appendChild(btn);
      div.addEventListener('click',()=>{ if(a.unlocked){ showAchievementModal(a.name,a.desc) } else { showAchievementModal(a.name,'LOL is locked better unlock it') } });
      achievementsList.appendChild(div);
    });
  }
  function showAchievementModal(title,text){ alert(title+"\n\n"+text) }
  function showClickEffect(){ cookieEl.style.transform='scale(1.15) rotate('+ (Math.random()*20-10) +'deg)'; setTimeout(()=>{cookieEl.style.transform='scale(1) rotate(0)'} ,150) }
  cookieEl.addEventListener('click',function(e){ let now=Date.now(); if(now-antiClickTimeout<50) return; antiClickTimeout=now; window.cookies+=1; clickCount++; lastClick=now; updateCounters(); showClickEffect(); try{ clickSound.cloneNode(true).play() }catch(err){} if(musicPaused){ try{ music.play().catch(()=>{}); musicPaused=false }catch(e){} }})
  modeToggle.addEventListener('click',()=>{ buyMode=!buyMode; modeToggle.textContent='Mode: '+(buyMode?'Buy':'Sell') })
  saveBtn.addEventListener('click',()=>{
    const data={c:Math.floor(window.cookies),u:upgrades.map(x=>x.count),n:playerName,lastClick:lastClick};
    const encoded=btoa(JSON.stringify(data));
    const blob=new Blob([encoded],{type:'text/plain'});
    const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=(Math.floor(Math.random()*1e6)+'.txt'); document.body.appendChild(a); a.click(); a.remove();
    showNotify('Saved')
  })
  loadBtn.addEventListener('click',()=>{
    const input=document.createElement('input'); input.type='file'; input.accept='.txt'; input.onchange=e=>{
      const file=e.target.files[0]; if(!file) return;
      const reader=new FileReader();
      reader.onload=function(ev){
        try{
          const decoded=atob(ev.target.result);
          const data=JSON.parse(decoded);
          window.cookies=Number(data.c)||0;
          upgrades.forEach((u,i)=>u.count=Number(data.u[i])||0);
          playerName=String(data.n)||playerName;
          lastClick=Number(data.lastClick)||lastClick;
          playerNameDisplay.textContent=playerName;
          settingsPlayerName.textContent='Player: '+playerName;
          updateAllUI();
          showNotify('Loaded');
        }catch(err){ alert('Invalid save file') }
      };
      reader.readAsText(file);
    };
    input.click();
  })
  openSettings.addEventListener('click',()=>{ settingsModal.style.display='flex'; settingsModal.setAttribute('aria-hidden','false'); buildAchievements() })
  closeSettings.addEventListener('click',()=>{ settingsModal.style.display='none'; settingsModal.setAttribute('aria-hidden','true') })
  playerNameDisplay.addEventListener('click',()=>{
    const newName=prompt('Enter your name:',playerName.replace(' factory',''));
    if(newName!==null && newName.trim()!==''){ playerName=newName.trim()+' factory'; playerNameDisplay.textContent=playerName; settingsPlayerName.textContent='Player: '+playerName }
  })
  function spawnGoldCookie(){
    if(goldActive) return;
    goldActive=true; goldEnd=Date.now()+60000;
    const gold=document.createElement('img'); gold.src='IMG_0778.jpeg'; gold.className='gold-cookie'; document.body.appendChild(gold);
    setTimeout(()=>{ gold.remove(); goldActive=false; updateAllUI() },60000)
  }
  function tryStartMusic(){
    if(musicStarted) return;
    musicStarted=true;
    music.play().catch(()=>{ musicPaused=true })
  }
  let musicStarted=false,musicPaused=false;
  document.addEventListener('click',function(){ tryStartMusic() },{once:true})
  window.addEventListener('keydown',function(e){ if(e.key==='F12' || (e.ctrlKey && e.shiftKey && e.key.toLowerCase()==='i')) { cheatDetected=true; } })
  Object.defineProperty(window,'__set_cookies_detect__',{set(v){ cheatDetected=true; window.cookies=v } })
  function computeCPS(){ cps=0; for(let u of upgrades) cps += u.count*u.baseCPS; if(goldActive) cps*=goldCPSMultiplier }
  function updateAllUI(){ computeCPS(); updateCounters(); buildUpgradesUI(); buildAchievements() }
  setInterval(()=>{ let gain=cps/10; if(goldActive) gain *= goldCPSMultiplier; window.cookies += gain; updateCounters(); buildAchievements() },100)
  updateAllUI(); tryStartMusic()
})()
</script>
</body>
</html>
